{% extends 'hr_base.html' %}
{% load staticfiles %}

{% load filters %}
{% load i18n %}

{% block head_end %}
    <script src="{% static 'js/vendors/jquery-formset.js' %}"></script>
    <script src="{% static 'js/bootstrap/bootstrap-datepicker.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/bootstrap/datepicker.css' %}">
    <script type="text/javascript">
        $(function () {
            $('.employee-incentive-form').formset({
                prefix: '{{ employee_incentive_formset.prefix }}'
            });
            $('.employee-grade-number-pause-form').formset({
                prefix: '{{ employee_grade_number_pause_formset.prefix }}'
            });
        });
    </script>
{% endblock %}
{% block breadcrumbs %}
    {{ block.super }}
    <li><a href="{% url 'payroll_entry' %}">{% trans 'Payroll Entry' %}</a>
    <li><a href="{% url 'entry_list' %}">{% trans 'Entry List' %}</a>
    <li><a href="{% url 'list_employee' %}">{% trans 'Employee List' %}</a>

{% endblock %}
{% block breadcrumbs_before_print %}
{% endblock %}

{% block alert %}

    <!-- <div id="alert_placeholder">
        <ul data-bind="foreach: errors.items" class="alert-error">
            <li>
                Budget for "<span data-bind="text: budget.name()"></span>" from source "<span data-bind="text: source"></span>" exceeds
            </li>
        </ul>
    </div> -->
{% endblock %}

{% block  content %}
    {% if obj_id %}
        <form method="POST" action="{% url 'edit_employee' obj_id %}">
    {% else %}
        <form method="POST" action="{% url 'add_employee' %}">
    {% endif %}
{% csrf_token %}
<div class="well">
    {% block extrahead %}
        {{ employee_form.media }}
    {% endblock %}
{#    {{ employee_form }}#}
    <div class="row">
        {% for field in employee_form.visible_fields %}
            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                {{ filed.errors.as_ul }}
                <div><label>{{ field.label }}: </label>{{ field }}</div>
            </div>
        {% endfor %}
    </div>

</div>


<div class="well">
<h3 class="nerp-title">{% trans 'Employee incentives' %}</h3>
    {{ employee_incentive_formset.non_form_errors.as_ul }}
    <table id="formset" class="form table table-striped">
        {% for form in employee_incentive_formset.forms %}
            {% if forloop.first %}
                <thead>
                <tr>
                    {% for field in form.visible_fields %}
                        <th>{{ field.label|capfirst }}</th>
                    {% endfor %}
                </tr>
                </thead>
            {% endif %}
            <tr class="{% cycle row1,row2 %} employee-incentive-form">
                {% for field in form.visible_fields %}
                    <td>
                        {# Include the hidden fields in the form #}
                        {% if forloop.first %}
                            {% for hidden in form.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                        {% endif %}
                        {{ field.errors.as_ul }}
                        {{ field }}
                    </td>
                {% endfor %}

            </tr>
        {% endfor %}
    </table>
</div>

{{ employee_incentive_formset.management_form }}

<div class="well">
<h3 class="nerp-title">{% trans 'Grade number pause date range' %}</h3>
    {{ employee_grade_number_pause_formset.non_form_errors.as_ul }}
    <table id="formset" class="form table table-striped">
        {% for form in employee_grade_number_pause_formset.forms %}
            {% if forloop.first %}
                <thead>
                <tr>
                    {% for field in form.visible_fields %}
                        <th>{{ field.label|capfirst }}</th>
                    {% endfor %}
                </tr>
                </thead>
            {% endif %}
            <tr class="{% cycle row1,row2 %} employee-grade-number-pause-form">
                {% for field in form.visible_fields %}
                    <td>
                        {# Include the hidden fields in the form #}
                        {% if forloop.first %}
                            {% for hidden in form.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                        {% endif %}
                        {{ field.errors.as_ul }}
                        {{ field }}
                    </td>
                {% endfor %}

            </tr>
        {% endfor %}
    </table>
</div>

{{ employee_grade_number_pause_formset.management_form }}
<input class="btn btn-raised btn-primary" type="submit" value="{% trans 'Save' %}">

</form>


{% endblock %}